# Simulating the laws of physics

## Description
An experimental simulation of a physical system by specifying the laws and the objects. It is implemented by using the [`simulate` function](https://hackage.haskell.org/package/gloss-1.9.4.1/docs/Graphics-Gloss.html#v:simulate) of Haskell's [Gloss library](https://hackage.haskell.org/package/gloss).

## Installation
Assuming that you have installed GHC, install the Gloss library with `cabal install gloss`. Then save the file [Mechanics.hs](/Mechanics.hs) into a directory. You can now `import Mechanics` from any Haskell source code in that directory.

## Usage
The file examples.hs should explain a lot. Observe that you can use your own datatype and make it an instance of `Physical`.  A datatype is `Physical` if it is possible to define an initial mass. charge, position, velocity, colour, and radius (as of now, all objects are spheres). Each of these values have natural defaults.

You also need to specify the "effects" that the bodies will have on each other. An effect is a function, that given a physical object, outputs the field created by that object. Some effects are already built in, like the `gravitationalField`, `centripetal`, `simpleHarmonic`, etc:

You may also consider external fields, which are fields that are not caused by the objects that are part of the system. If you do not want any external fields, then use `noField`.

This example should demonstrate how to create ones own effect or field:

```haskell
gravitationField :: Body a -> Field
gravitationField o1 (p2, _) = ((gConst * m1) / (dist p1 p2 ^ 2) ) #* dir p2 p1
        where m1 = mass o1
              p1 = position o1
```

`dir` is the direction of the vector from `p2` to `p1`, while `dist` is the distance. gConst is the gravitational constant, while `mass o1` extracts the mass from `o1` and position `o1` extracts the position. Vector operations are denoted just like their scalar counterparts but with an additional `#`. For instance `#*` defines the multiplication of a scalar with a vector, `#+` is defined as the addition of two vectors. The vector operation definitions are in [Mechanics.hs](/Mechanics.hs) and are easy to understand. 

In general a formula defining a vector field generated by a body will involve vector and scalar operations and attributes of the body itself. Note that just like `mass o1`, you can also use `charge o1`, etc.

`Body a` in the above type signature needs some explanation. Behind the scenes, the dataype `a` is wrapped in the datatype `Body a` which contains the object of type `a` and its mass, state, charge, etc. Each of these values are accessible via the functions `mass`, `charge`, `velocity`, etc.

I am not sure if the typeclass `Physical` is an overuse of typeclasses, but it allows cleaner code, and makes it easy to handle default values.
